{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "ApimServiceName": {
      "type": "string"
    }
  },
  "resources": [
    {
      "properties": {
        "apiVersionSetId": "[resourceId('Microsoft.ApiManagement/service/apiVersionSets', parameters('ApimServiceName'), 'segmentVersionID')]",
        "path": "ezshare-api",
        "value": "{\r\n    \"swagger\":\"2.0\",\r\n    \"info\":{\r\n       \"version\":\"v1\",\r\n       \"title\":\"PublicEzShareAPI\"\r\n    },\r\n    \"host\":\"idbdocs-test.iadb.org\",\r\n    \"basePath\":\"/PublicEzShareAPI\",\r\n    \"schemes\":[\r\n       \"https\"\r\n    ],\r\n    \"paths\":{\r\n       \"/api/File\":{\r\n          \"post\":{\r\n             \"tags\":[\r\n                \"File\"\r\n             ],\r\n             \"operationId\":\"File_Post\",\r\n             \"consumes\":[\r\n                \"application/json\",\r\n                \"text/json\",\r\n                \"application/xml\",\r\n                \"text/xml\",\r\n                \"application/x-www-form-urlencoded\"\r\n             ],\r\n             \"produces\":[\r\n                \"application/json\",\r\n                \"text/json\",\r\n                \"application/xml\",\r\n                \"text/xml\"\r\n             ],\r\n             \"parameters\":[\r\n                {\r\n                   \"name\":\"request\",\r\n                   \"in\":\"body\",\r\n                   \"required\":true,\r\n                   \"schema\":{\r\n                      \"$ref\":\"#/definitions/CreateDocumentFromStreamRequest\"\r\n                   }\r\n                }\r\n             ],\r\n             \"responses\":{\r\n                \"200\":{\r\n                   \"description\":\"OK\",\r\n                   \"schema\":{\r\n                      \"$ref\":\"#/definitions/CreateDocumentFromStreamResponse\"\r\n                   }\r\n                }\r\n             }\r\n          }\r\n       },\r\n       \"/api/Folder\":{\r\n          \"post\":{\r\n             \"tags\":[\r\n                \"Folder\"\r\n             ],\r\n             \"operationId\":\"Folder_Post\",\r\n             \"consumes\":[\r\n                \"application/json\",\r\n                \"text/json\",\r\n                \"application/xml\",\r\n                \"text/xml\",\r\n                \"application/x-www-form-urlencoded\"\r\n             ],\r\n             \"produces\":[\r\n                \"application/json\",\r\n                \"text/json\",\r\n                \"application/xml\",\r\n                \"text/xml\"\r\n             ],\r\n             \"parameters\":[\r\n                {\r\n                   \"name\":\"request\",\r\n                   \"in\":\"body\",\r\n                   \"required\":true,\r\n                   \"schema\":{\r\n                      \"$ref\":\"#/definitions/CreateFolderRequest\"\r\n                   }\r\n                }\r\n             ],\r\n             \"responses\":{\r\n                \"200\":{\r\n                   \"description\":\"OK\",\r\n                   \"schema\":{\r\n                      \"$ref\":\"#/definitions/CreateFolderResponse\"\r\n                   }\r\n                }\r\n             }\r\n          }\r\n       },\r\n       \"/api/Search\":{\r\n          \"post\":{\r\n             \"tags\":[\r\n                \"Search\"\r\n             ],\r\n             \"operationId\":\"Search_Post\",\r\n             \"consumes\":[\r\n                \"application/json\",\r\n                \"text/json\",\r\n                \"application/xml\",\r\n                \"text/xml\",\r\n                \"application/x-www-form-urlencoded\"\r\n             ],\r\n             \"produces\":[\r\n                \"application/json\",\r\n                \"text/json\",\r\n                \"application/xml\",\r\n                \"text/xml\"\r\n             ],\r\n             \"parameters\":[\r\n                {\r\n                   \"name\":\"request\",\r\n                   \"in\":\"body\",\r\n                   \"required\":true,\r\n                   \"schema\":{\r\n                      \"$ref\":\"#/definitions/SearchRequest\"\r\n                   }\r\n                }\r\n             ],\r\n             \"responses\":{\r\n                \"200\":{\r\n                   \"description\":\"OK\",\r\n                   \"schema\":{\r\n                      \"$ref\":\"#/definitions/SearchResponse\"\r\n                   }\r\n                }\r\n             }\r\n          }\r\n       }\r\n    },\r\n    \"definitions\":{\r\n       \"CreateDocumentFromStreamRequest\":{\r\n          \"type\":\"object\",\r\n          \"properties\":{\r\n             \"fileStream\":{\r\n                \"format\":\"byte\",\r\n                \"type\":\"string\"\r\n             },\r\n             \"Criteria\":{\r\n                \"type\":\"string\"\r\n             },\r\n             \"trusteeList\":{\r\n                \"type\":\"string\"\r\n             }\r\n          }\r\n       },\r\n       \"CreateDocumentFromStreamResponse\":{\r\n          \"type\":\"object\",\r\n          \"properties\":{\r\n             \"SearchLib\":{\r\n                \"type\":\"string\"\r\n             },\r\n             \"Criteria\":{\r\n                \"type\":\"string\"\r\n             },\r\n             \"Command\":{\r\n                \"type\":\"string\"\r\n             },\r\n             \"Action\":{\r\n                \"type\":\"string\"\r\n             },\r\n             \"DocNum\":{\r\n                \"type\":\"string\"\r\n             },\r\n             \"Url\":{\r\n                \"type\":\"string\"\r\n             },\r\n             \"Status\":{\r\n                \"type\":\"string\"\r\n             },\r\n             \"Message\":{\r\n                \"type\":\"string\"\r\n             }\r\n          }\r\n       },\r\n       \"CreateFolderRequest\":{\r\n          \"type\":\"object\",\r\n          \"properties\":{\r\n             \"Library\":{\r\n                \"type\":\"string\"\r\n             },\r\n             \"NewFolderName\":{\r\n                \"type\":\"string\"\r\n             },\r\n             \"SiteURL\":{\r\n                \"type\":\"string\"\r\n             },\r\n             \"Folder\":{\r\n                \"type\":\"string\"\r\n             },\r\n             \"Owners\":{\r\n                \"type\":\"array\",\r\n                \"items\":{\r\n                   \"type\":\"string\"\r\n                }\r\n             }\r\n          }\r\n       },\r\n       \"CreateFolderResponse\":{\r\n          \"type\":\"object\",\r\n          \"properties\":{\r\n             \"ResponseMessage\":{\r\n                \"type\":\"string\"\r\n             }\r\n          }\r\n       },\r\n       \"SearchRequest\":{\r\n          \"type\":\"object\",\r\n          \"properties\":{\r\n             \"ReturnProperties\":{\r\n                \"type\":\"string\"\r\n             },\r\n             \"SearchCriteria\":{\r\n                \"type\":\"string\"\r\n             }\r\n          }\r\n       },\r\n       \"SearchResponse\":{\r\n          \"type\":\"object\",\r\n          \"properties\":{\r\n             \"Documents\":{\r\n                \"type\":\"array\",\r\n                \"items\":{\r\n                   \"type\":\"object\",\r\n                   \"additionalProperties\":{\r\n                      \"type\":\"string\"\r\n                   }\r\n                }\r\n             },\r\n             \"Criteria\":{\r\n                \"type\":\"string\"\r\n             },\r\n             \"Rows\":{\r\n                \"type\":\"string\"\r\n             }\r\n          }\r\n       }\r\n    }\r\n }",
        "format": "swagger-json"
      },
      "name": "[concat(parameters('ApimServiceName'), '/ezshare-api')]",
      "type": "Microsoft.ApiManagement/service/apis",
      "apiVersion": "2019-01-01",
      "dependsOn": []
    }
  ]
}